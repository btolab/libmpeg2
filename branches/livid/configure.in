dnl Autoconf configuration script mpeg2dec
dnl 
dnl Aaron Holtzman - May 1999
dnl
AC_INIT(parse.c)
AC_CANONICAL_HOST
AC_PREREQ(2.13)
AM_CONFIG_HEADER(config.h)
AM_INIT_AUTOMAKE(mpeg2dec, 0.1.4)

AM_MAINTAINER_MODE
AC_PROG_CC
AC_PROG_GCC_TRADITIONAL
AC_PROG_RANLIB


AC_MSG_CHECKING(for /dev/mga_vid)
if test -c "/dev/mga_vid"; then
	AC_MSG_RESULT(found /dev/mga_vid)
	rm -f display.c;ln -s display_mga_vid.c display.c
else
	AC_MSG_RESULT(/dev/mga_vid not found -> X11 fallback configured)
	rm -f display.c;ln -s display_x11.c display.c
fi

dnl Figure out which OS we're on and what to do about it
case "$host" in
*-linux*) ;;
*-solaris*) ;;
*) ;;
esac

dnl Set the appropriate architecture define
case "$host" in
i?86-*) AC_DEFINE(__i386__);;
alpha-*) AC_DEFINE(__alpha__);;
sparc-*) AC_DEFINE(__sparc__);;
ppc-*) AC_DEFINE(__ppc__);;
*) echo "$host is not currently supported by ac3dec"; exit 1;;
esac

AC_OUTPUT( tools/Makefile drivers/Makefile Makefile ) 
